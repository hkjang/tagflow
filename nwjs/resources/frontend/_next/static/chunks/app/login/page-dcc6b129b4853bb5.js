(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{3782:function(e,t,r){Promise.resolve().then(r.bind(r,769))},769:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var o=r(7821),s=r(8397),n=r.n(s),a=r(8078),i=r(6179),l=r(1981);function d(){let e=(0,i.useRouter)(),{login:t,isAuthenticated:r,isLoading:s}=(0,l.a)(),[d,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1);(0,a.useEffect)(()=>{r&&!s&&e.push("/")},[r,s,e]);let b=async r=>{r.preventDefault(),f(""),p(!0);try{await t(d,u),e.push("/")}catch(e){var o,s;f((null===(s=e.response)||void 0===s?void 0:null===(o=s.data)||void 0===o?void 0:o.message)||"Invalid username or password")}finally{p(!1)}};return s?(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},className:"jsx-7a90291f0de70b21",children:[(0,o.jsx)("div",{style:{width:"50px",height:"50px",border:"4px solid #e5e7eb",borderTop:"4px solid #2563eb",borderRadius:"50%",animation:"spin 1s linear infinite"},className:"jsx-7a90291f0de70b21"}),(0,o.jsx)(n(),{id:"7a90291f0de70b21",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]}):(0,o.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"#f3f4f6",fontFamily:"system-ui, -apple-system, sans-serif"},children:(0,o.jsxs)("div",{style:{width:"100%",maxWidth:"400px",padding:"2rem",backgroundColor:"white",borderRadius:"0.75rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[(0,o.jsxs)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[(0,o.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.5rem"},children:"TagFlow"}),(0,o.jsx)("p",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Sign in to your account"})]}),(0,o.jsxs)("form",{onSubmit:b,children:[g&&(0,o.jsx)("div",{style:{padding:"0.75rem",marginBottom:"1rem",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"0.375rem",color:"#991b1b",fontSize:"0.875rem"},children:g}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsx)("label",{htmlFor:"username",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Username"}),(0,o.jsx)("input",{id:"username",type:"text",value:d,onChange:e=>c(e.target.value),required:!0,style:{width:"100%",padding:"0.625rem 0.75rem",fontSize:"0.875rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",outline:"none",transition:"border-color 0.15s"},onFocus:e=>e.target.style.borderColor="#2563eb",onBlur:e=>e.target.style.borderColor="#d1d5db"})]}),(0,o.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,o.jsx)("label",{htmlFor:"password",style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Password"}),(0,o.jsx)("input",{id:"password",type:"password",value:u,onChange:e=>m(e.target.value),required:!0,style:{width:"100%",padding:"0.625rem 0.75rem",fontSize:"0.875rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",outline:"none",transition:"border-color 0.15s"},onFocus:e=>e.target.style.borderColor="#2563eb",onBlur:e=>e.target.style.borderColor="#d1d5db"})]}),(0,o.jsx)("button",{type:"submit",disabled:h,style:{width:"100%",padding:"0.625rem 1rem",fontSize:"0.875rem",fontWeight:"500",color:"white",backgroundColor:h?"#93c5fd":"#2563eb",border:"none",borderRadius:"0.375rem",cursor:h?"not-allowed":"pointer",transition:"background-color 0.15s"},onMouseEnter:e=>{h||(e.currentTarget.style.backgroundColor="#1d4ed8")},onMouseLeave:e=>{h||(e.currentTarget.style.backgroundColor="#2563eb")},children:h?"Signing in...":"Sign in"})]}),(0,o.jsx)("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid #e5e7eb",textAlign:"center",fontSize:"0.75rem",color:"#6b7280"},children:(0,o.jsx)("p",{children:"Default credentials: admin / admin123"})})]})})}},1981:function(e,t,r){"use strict";r.d(t,{a:function(){return a}});var o=r(8433),s=r(2076);let n={login:async e=>(await s.Z.post("/auth/login",e)).data,refreshToken:async e=>(await s.Z.post("/auth/refresh",{refresh_token:e})).data,getCurrentUser:async()=>(await s.Z.get("/auth/me")).data,logout(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}},a=(0,o.Ue)((e,t)=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!0,setTokens:(t,r)=>{localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",r),e({accessToken:t,refreshToken:r,isAuthenticated:!0})},setUser:t=>{e({user:t,isAuthenticated:!!t})},setLoading:t=>{e({isLoading:t})},login:async(r,o)=>{try{e({isLoading:!0});let s=await n.login({username:r,password:o});t().setTokens(s.access_token,s.refresh_token),e({user:s.user,isAuthenticated:!0})}catch(e){throw console.error("Login failed:",e),e}finally{e({isLoading:!1})}},logout:()=>{n.logout(),e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1})},refreshUser:async()=>{try{e({isLoading:!0});let t=await n.getCurrentUser();e({user:t,isAuthenticated:!0})}catch(e){console.error("Failed to refresh user:",e),t().logout()}finally{e({isLoading:!1})}}}));{let e=localStorage.getItem("access_token"),t=localStorage.getItem("refresh_token");e&&t?(a.setState({accessToken:e,refreshToken:t,isAuthenticated:!0,isLoading:!0}),a.getState().refreshUser()):a.setState({isLoading:!1})}},2076:function(e,t,r){"use strict";var o=r(1892);let s=r(9792).env.NEXT_PUBLIC_API_URL||"http://localhost:3001",n=o.Z.create({baseURL:s,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,async e=>{var t,r,a;let i=e.config,l=(null===(t=i.url)||void 0===t?void 0:t.includes("/auth/login"))||(null===(r=i.url)||void 0===r?void 0:r.includes("/auth/refresh")),d=localStorage.getItem("refresh_token");if((null===(a=e.response)||void 0===a?void 0:a.status)===401&&!i._retry&&!l&&d){i._retry=!0;try{let{access_token:e,refresh_token:t}=(await o.Z.post("".concat(s,"/auth/refresh"),{refresh_token:d})).data;return localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t),i.headers&&(i.headers.Authorization="Bearer ".concat(e)),n(i)}catch(e){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)}),t.Z=n}},function(e){e.O(0,[885,113,115,141,744],function(){return e(e.s=3782)}),_N_E=e.O()}]);