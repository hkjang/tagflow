(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[792],{285:function(e,r,t){Promise.resolve().then(t.bind(t,4674))},4674:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return i}});var o=t(7821),n=t(8078),a=t(1892);let s=t(9792).env.NEXT_PUBLIC_API_URL||"http://localhost:3001",d={async getAllUsers(){let e=localStorage.getItem("access_token");return(await a.Z.get("".concat(s,"/users"),{headers:{Authorization:"Bearer ".concat(e)}})).data},async createUser(e){let r=localStorage.getItem("access_token");return(await a.Z.post("".concat(s,"/users"),e,{headers:{Authorization:"Bearer ".concat(r)}})).data},async updateUser(e,r){let t=localStorage.getItem("access_token");return(await a.Z.put("".concat(s,"/users/").concat(e),r,{headers:{Authorization:"Bearer ".concat(t)}})).data},async deleteUser(e){let r=localStorage.getItem("access_token");await a.Z.delete("".concat(s,"/users/").concat(e),{headers:{Authorization:"Bearer ".concat(r)}})}};function i(){let[e,r]=(0,n.useState)([]),[t,a]=(0,n.useState)(!0),[s,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(null),[m,u]=(0,n.useState)({username:"",password:"",role:"operator"});(0,n.useEffect)(()=>{h()},[]);let h=async()=>{try{a(!0);let e=await d.getAllUsers();r(e)}catch(e){console.error("Failed to load users:",e)}finally{a(!1)}},p=e=>{c(e),u({username:e.username,password:"",role:e.role}),i(!0)},g=async e=>{e.preventDefault();try{l?await d.updateUser(l.id,m):await d.createUser(m),i(!1),h()}catch(e){var r,t;alert((null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)||"Failed to save user")}},b=async e=>{if("admin"===e.username){alert("Cannot delete admin user");return}if(confirm('Are you sure you want to delete user "'.concat(e.username,'"?')))try{await d.deleteUser(e.id),h()}catch(e){alert("Failed to delete user")}};return t?(0,o.jsx)("div",{style:{padding:"2rem"},children:"Loading..."}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,o.jsx)("h1",{style:{fontSize:"1.875rem",fontWeight:"bold",color:"#1f2937"},children:"User Management"}),(0,o.jsx)("button",{onClick:()=>{c(null),u({username:"",password:"",role:"operator"}),i(!0)},style:{backgroundColor:"#2563eb",color:"white",padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:"Add User"})]}),(0,o.jsx)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)",overflow:"hidden"},children:(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,o.jsx)("thead",{style:{backgroundColor:"#f9fafb"},children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"Username"}),(0,o.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"Role"}),(0,o.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"Created At"}),(0,o.jsx)("th",{style:{padding:"0.75rem 1.5rem",textAlign:"right",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280",textTransform:"uppercase"},children:"Actions"})]})}),(0,o.jsx)("tbody",{style:{borderTop:"1px solid #e5e7eb"},children:e.map(e=>(0,o.jsxs)("tr",{style:{borderTop:"1px solid #e5e7eb"},children:[(0,o.jsx)("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#1f2937"},children:e.username}),(0,o.jsx)("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:(0,o.jsx)("span",{style:{backgroundColor:"admin"===e.role?"#fee2e2":"#dbeafe",color:"admin"===e.role?"#991b1b":"#1e40af",padding:"0.125rem 0.5rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500"},children:e.role.toUpperCase()})}),(0,o.jsx)("td",{style:{padding:"1rem 1.5rem",fontSize:"0.875rem",color:"#6b7280"},children:new Date(e.created_at).toLocaleDateString()}),(0,o.jsxs)("td",{style:{padding:"1rem 1.5rem",textAlign:"right",fontSize:"0.875rem",fontWeight:"500"},children:[(0,o.jsx)("button",{onClick:()=>p(e),style:{color:"#2563eb",border:"none",background:"none",cursor:"pointer",marginRight:"1rem"},children:"Edit"}),(0,o.jsx)("button",{onClick:()=>b(e),style:{color:"#dc2626",border:"none",background:"none",cursor:"pointer"},disabled:"admin"===e.username,children:"Delete"})]})]},e.id))})]})}),s&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:(0,o.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",maxWidth:"500px",width:"90%"},children:[(0,o.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1.5rem"},children:l?"Edit User":"Create User"}),(0,o.jsxs)("form",{onSubmit:g,children:[(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"Username"}),(0,o.jsx)("input",{type:"text",value:m.username,onChange:e=>u({...m,username:e.target.value}),required:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem"}})]}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsxs)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:["Password ",l&&"(leave empty to keep current)"]}),(0,o.jsx)("input",{type:"password",value:m.password,onChange:e=>u({...m,password:e.target.value}),required:!l,style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem"}})]}),(0,o.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",marginBottom:"0.5rem"},children:"Role"}),(0,o.jsxs)("select",{value:m.role,onChange:e=>u({...m,role:e.target.value}),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"0.375rem"},children:[(0,o.jsx)("option",{value:"operator",children:"Operator"}),(0,o.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,o.jsx)("button",{type:"button",onClick:()=>i(!1),style:{padding:"0.5rem 1rem",border:"1px solid #d1d5db",borderRadius:"0.375rem",background:"white",cursor:"pointer"},children:"Cancel"}),(0,o.jsx)("button",{type:"submit",style:{padding:"0.5rem 1rem",backgroundColor:"#2563eb",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:l?"Update":"Create"})]})]})]})})]})}}},function(e){e.O(0,[885,115,141,744],function(){return e(e.s=285)}),_N_E=e.O()}]);