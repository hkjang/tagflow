(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931,113,769],{5020:function(e,t,r){Promise.resolve().then(r.bind(r,1911))},1911:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(7821),o=r(8397),s=r.n(o),i=r(6179),a=r(1981);function u(){let e=(0,i.useRouter)(),{user:t,isAuthenticated:r,logout:o,isLoading:u}=(0,a.a)();return r&&t?(e.push("/dashboard"),null):u?(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},className:"jsx-7a90291f0de70b21",children:[(0,n.jsx)("div",{style:{width:"50px",height:"50px",border:"4px solid #e5e7eb",borderTop:"4px solid #2563eb",borderRadius:"50%",animation:"spin 1s linear infinite"},className:"jsx-7a90291f0de70b21"}),(0,n.jsx)(s(),{id:"7a90291f0de70b21",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]}):(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",fontFamily:"system-ui, -apple-system, sans-serif",backgroundColor:"#f3f4f6",padding:"1rem"},children:(0,n.jsxs)("div",{style:{width:"100%",maxWidth:"600px",textAlign:"center"},children:[(0,n.jsx)("h1",{style:{fontSize:"3rem",fontWeight:"bold",color:"#1f2937",marginBottom:"1rem"},children:"TagFlow"}),(0,n.jsx)("p",{style:{fontSize:"1.25rem",color:"#6b7280",marginBottom:"2rem"},children:"RFID Tag Management System"}),!r&&(0,n.jsxs)("div",{style:{padding:"2rem",backgroundColor:"white",borderRadius:"0.75rem",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",marginBottom:"1rem"},children:[(0,n.jsx)("p",{style:{color:"#6b7280",marginBottom:"1.5rem"},children:"Please sign in to access the system"}),(0,n.jsx)("button",{onClick:()=>e.push("/login"),style:{padding:"0.625rem 1.5rem",fontSize:"0.875rem",fontWeight:"500",color:"white",backgroundColor:"#2563eb",border:"none",borderRadius:"0.375rem",cursor:"pointer",transition:"background-color 0.15s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#1d4ed8",onMouseLeave:e=>e.currentTarget.style.backgroundColor="#2563eb",children:"Sign in"})]}),(0,n.jsx)("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"0.75rem",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1)"},children:(0,n.jsxs)("p",{style:{color:"#374151",fontSize:"0.875rem"},children:["Backend API:"," ",(0,n.jsx)("a",{href:"http://localhost:3001",target:"_blank",rel:"noopener noreferrer",style:{color:"#2563eb",textDecoration:"none"},onMouseEnter:e=>e.currentTarget.style.textDecoration="underline",onMouseLeave:e=>e.currentTarget.style.textDecoration="none",children:"http://localhost:3001"})]})})]})})}},1981:function(e,t,r){"use strict";r.d(t,{a:function(){return i}});var n=r(8433),o=r(2076);let s={login:async e=>(await o.Z.post("/auth/login",e)).data,refreshToken:async e=>(await o.Z.post("/auth/refresh",{refresh_token:e})).data,getCurrentUser:async()=>(await o.Z.get("/auth/me")).data,logout(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),sessionStorage.removeItem("tagflow_scan_purpose_id"),sessionStorage.removeItem("tagflow_scan_purpose_data")}},i=(0,n.Ue)((e,t)=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,isLoading:!0,setTokens:(t,r)=>{localStorage.setItem("access_token",t),localStorage.setItem("refresh_token",r),e({accessToken:t,refreshToken:r,isAuthenticated:!0})},setUser:t=>{e({user:t,isAuthenticated:!!t})},setLoading:t=>{e({isLoading:t})},login:async(r,n)=>{try{e({isLoading:!0});let o=await s.login({username:r,password:n});t().setTokens(o.access_token,o.refresh_token),e({user:o.user,isAuthenticated:!0})}catch(e){throw console.error("Login failed:",e),e}finally{e({isLoading:!1})}},logout:()=>{s.logout(),e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1})},refreshUser:async()=>{try{e({isLoading:!0});let t=await s.getCurrentUser();e({user:t,isAuthenticated:!0})}catch(e){console.error("Failed to refresh user:",e),t().logout()}finally{e({isLoading:!1})}}}));{let e=localStorage.getItem("access_token"),t=localStorage.getItem("refresh_token");e&&t?(i.setState({accessToken:e,refreshToken:t,isAuthenticated:!0,isLoading:!0}),i.getState().refreshUser()):i.setState({isLoading:!1})}},2076:function(e,t,r){"use strict";var n=r(1892);let o=r(9792).env.NEXT_PUBLIC_API_URL||"http://localhost:3001",s=n.Z.create({baseURL:o,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=localStorage.getItem("access_token");return t&&e.headers&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,async e=>{var t,r,i;let a=e.config,u=(null===(t=a.url)||void 0===t?void 0:t.includes("/auth/login"))||(null===(r=a.url)||void 0===r?void 0:r.includes("/auth/refresh")),l=localStorage.getItem("refresh_token");if((null===(i=e.response)||void 0===i?void 0:i.status)===401&&!a._retry&&!u&&l){a._retry=!0;try{let{access_token:e,refresh_token:t}=(await n.Z.post("".concat(o,"/auth/refresh"),{refresh_token:l})).data;return localStorage.setItem("access_token",e),localStorage.setItem("refresh_token",t),a.headers&&(a.headers.Authorization="Bearer ".concat(e)),s(a)}catch(e){return localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/login",Promise.reject(e)}}return Promise.reject(e)}),t.Z=s},8298:function(e,t,r){var n=r(9792);r(5825);var o=r(8078),s=o&&"object"==typeof o&&"default"in o?o:{default:o};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=void 0!==n&&n.env&&!0,u=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,r=t.name,n=void 0===r?"stylesheet":r,o=t.optimizeForSpeed,s=void 0===o?a:o;c(u(n),"`name` must be a string"),this._name=n,this._deletedRulePlaceholder="#"+n+"-deleted-rule____{}",c("boolean"==typeof s,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=s,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var i=document.querySelector('meta[property="csp-nonce"]');this._nonce=i?i.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(a||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(c(u(e),"`insertRule` accepts only strings"),this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return a||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var n=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,n))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed){var r=this.getSheet();if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(n){a||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var n=this._tags[e];c(n,"old rule at index `"+e+"` not found"),n.textContent=t}return e},r.deleteRule=function(e){if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]},r.cssRules=function(){var e=this;return this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&c(u(t),"makeStyleTag accepts only strings as second parameter");var n=document.createElement("style");this._nonce&&n.setAttribute("nonce",this._nonce),n.type="text/css",n.setAttribute("data-"+e,""),t&&n.appendChild(document.createTextNode(t));var o=document.head||document.getElementsByTagName("head")[0];return r?o.insertBefore(n,r):o.appendChild(n),n},i(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),t&&i(e,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},h={};function f(e,t){if(!t)return"jsx-"+e;var r=String(t),n=e+r;return h[n]||(h[n]="jsx-"+d(e+"-"+r)),h[n]}function m(e,t){var r=e+t;return h[r]||(h[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),h[r]}var p=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,n=void 0===r?null:r,o=t.optimizeForSpeed,s=void 0!==o&&o;this._sheet=n||new l({name:"styled-jsx",optimizeForSpeed:s}),this._sheet.inject(),n&&"boolean"==typeof s&&(this._sheet.setOptimizeForSpeed(s),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),n=r.styleId,o=r.rules;if(n in this._instancesCounts){this._instancesCounts[n]+=1;return}var s=o.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[n]=s,this._instancesCounts[n]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var n=this._fromServer&&this._fromServer[r];n?(n.parentNode.removeChild(n),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],n=e[1];return s.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:n}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,n=e.id;if(r){var o=f(n,r);return{styleId:o,rules:Array.isArray(t)?t.map(function(e){return m(o,e)}):[m(o,t)]}}return{styleId:f(n),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),g=o.createContext(null);g.displayName="StyleSheetContext";var _=s.default.useInsertionEffect||s.default.useLayoutEffect,v=new p;function y(e){var t=v||o.useContext(g);return t&&_(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)]),null}y.dynamic=function(e){return e.map(function(e){return f(e[0],e[1])}).join(" ")},t.style=y},8397:function(e,t,r){e.exports=r(8298).style},5825:function(){},6179:function(e,t,r){e.exports=r(319)},8940:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(8078),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useState,i=n.useEffect,a=n.useLayoutEffect,u=n.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!o(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=s({inst:{value:r,getSnapshot:t}}),o=n[0].inst,c=n[1];return a(function(){o.value=r,o.getSnapshot=t,l(o)&&c({inst:o})},[e,r,t]),i(function(){return l(o)&&c({inst:o}),e(function(){l(o)&&c({inst:o})})},[e]),u(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},6259:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(8078),o=r(4268),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useSyncExternalStore,a=n.useRef,u=n.useEffect,l=n.useMemo,c=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var f=i(e,(d=l(function(){function e(e){if(!u){if(u=!0,i=e,e=n(e),void 0!==o&&h.hasValue){var t=h.value;if(o(t,e))return a=t}return a=e}if(t=a,s(i,e))return t;var r=n(e);return void 0!==o&&o(t,r)?(i=e,t):(i=e,a=r)}var i,a,u=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,r,n,o]))[0],d[1]);return u(function(){h.hasValue=!0,h.value=f},[f]),c(f),f}},4268:function(e,t,r){"use strict";e.exports=r(8940)},8780:function(e,t,r){"use strict";e.exports=r(6259)},8433:function(e,t,r){"use strict";r.d(t,{Ue:function(){return h}});let n=e=>{let t;let r=new Set,n=(e,n)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=n?n:"object"!=typeof o||null===o)?o:Object.assign({},t,o),r.forEach(r=>r(t,e))}},o=()=>t,s={setState:n,getState:o,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},i=t=e(n,o,s);return s},o=e=>e?n(e):n;var s=r(8078),i=r(8780);let{useDebugValue:a}=s,{useSyncExternalStoreWithSelector:u}=i,l=!1,c=e=>e,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?o(e):e,r=(e,r)=>(function(e,t=c,r){r&&!l&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),l=!0);let n=u(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return a(n),n})(t,e,r);return Object.assign(r,t),r},h=e=>e?d(e):d}},function(e){e.O(0,[885,115,141,744],function(){return e(e.s=5020)}),_N_E=e.O()}]);